# Менеджер для разработки проектов на odoo

## Цель проекта
Основная цель проекта - создать инструмент для разработчика на платформе odoo, который будет удовлетворять следующим требованиям:
- не зависеть от операционной системы
- по возможности не зависеть от архитектуры процессора (Для примера запуск на MacOS на базе M1)
- для передачи всей информации о проекте, достаточно передать только `config.json` разработчику, он на его базе сможет легко подготовить новое окружение в полностью автоматическом режиме
- иметь удобные инструменты, которые часто необходимы разработчику, например:
    - быстрое удаление БД
    - быстрое восстановление БД из архива
    - создание новой БД со своими настройками (страна, язык, демоданные и прочее)
    - смена пароля для указанного логина
    - ... и многое другое
    - механизмы для расширения функционала, на будущее

## Подготовка
вам необходимо скачать и установить следующие программы:
- Docker Desktop
- git
- python3
Затем вам необходимо выбрать место, куда вы склонируете исходники системы odoo и каталог, который появится после клонирования указать в параметре `odoo_src_dir` в файле `config.json`
Так же необходимо создать папку, в которую менеджер будет клонировать разрабатываемые вами проекты и проекты - зависимости
и указать этот каталог в параметре `odoo_projects_dir` в файле `config.json`

## Как начать работать
Создаете папку где у вас будет располагаться новый проект. Копируете туда содержимое данного проекта
Открываете вновь созданный проект в vscode
Теперь надо подготовить образ Docker
```
python3 /path/to/your/new/project/docker_start.py --build_image
```
Эта команда создаст образ
Затем надо подготовить виртуальное окружение внутри самого контейнера, для этого запускаем следующую команду:
```
python3 /path/to/your/new/project/docker_start.py --pip_install
```
Система подготовит и установит все необходимые пакеты для запуска odoo
После этого можно запустить odoo в режиме разработчика
```
python3 /path/to/your/new/project/docker_start.py -d new_db -i -u
```
Данная команда запустит odoo внутри Docker контейнера и создаст новую базу с именем new_db и установит туда модуль из указанного проекта

## Параметры config.json:

Будут описаны позже

## Параметры командной строки

- -d - указать имя базы данных для работы, если такой базы не существует, она будет создана автоматически, на основании параметров `db_creation_data` параметра файла конфигурации `config.json`
- -i - параметр указывает на то что нужно проинициализировать модули указанные в параметре `init_modules` файла конфигурации `config.json`
- u - параметр указывает на то что нужно обновить модули указанные в параметре `update_modules` файла конфигурации `config.json`
- -t - запустит тесты модулей указанных в параметре `init_modules` и `update_modules` файла конфигурации `config.json`, работает только при использовании параметров `-d`, `-i`, `-u`, если база создается с нуля, то для всех устанавливаемых модулей будут запущены тесты, это может занять много времени
- --get_dbs_list - выводит список баз данных
- --db-restore - система попытается восстановить архив БД в качестве параметра указывается путь к архиву, относительно каталога, указанного в параметре `backups/localdir` файла конфигурации `config.json`, имя БД при восстановлении будет взято из параметра `-d`
- --db-drop - в качестве параметра указывается имя базы данных, которую необходимо удалить, если использовать совместно с флагами `-d`, `-i`, `-u`, и указать одно и тоже имя БД, то система сначала удалит базу, а затем создаст новую с таким же именем и установит указанные модули
- --translate - Принимает в качестве параметра код языка, например `ru_RU`, при использовании данного параметра, система добавит соответствующий язык в систему и обновит все термины из модулей указанных в параметре `init_modules` и `update_modules` файла конфигурации `config.json`, работает только при использовании параметров `-d`, `-i`, `-u`
- --pip_install - указывает системе на то, что нужно установить зависимости для указанной в параметре `odoo_version` версии odoo и зависимостей указанных в файле `requirements.txt` в каталоге `dev_project`.
- --start_precommit - запускает проверку прекоммита для разрабатываемого проекта, указанного в параметре `developing_project` файла конфигурации `config.json`.
- --build_image - запустит сборку образа Docker для вашего проекта
